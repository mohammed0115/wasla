{% extends "layouts/dashboard_base.html" %}
{% load i18n %}

{% block title %}{% trans "AI Description Preview" %}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h1 class="h4 mb-1">{% trans "Description preview" %}</h1>
    <div class="text-muted small">{{ product.name }}</div>
  </div>
  <a class="btn btn-outline-secondary" href="{% url 'web:dashboard_ai_tools' %}">{% trans "Back" %}</a>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <div class="mb-3 d-flex align-items-center gap-2">
      <span class="badge bg-info text-dark">{% trans "Generated by AI" %}</span>
      {% if result.provider %}
        <span class="text-muted small">{{ result.provider }}</span>
      {% endif %}
    </div>

    {% if result.warnings %}
      <div class="alert alert-warning">
        {% for warning in result.warnings %}
          <div>{{ warning }}</div>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" action="{% url 'web:dashboard_ai_description' product.id %}">
      {% csrf_token %}
      <input type="hidden" name="action" value="save" />
      <input type="hidden" name="language" value="{{ language }}" />

      <div class="mb-3">
        <label class="form-label">{% trans "Description" %}</label>
        <textarea class="form-control" name="description" rows="6">{{ result.description }}</textarea>
      </div>

      {% if has_existing_description %}
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" value="1" id="forceOverwrite" name="force" />
          <label class="form-check-label" for="forceOverwrite">
            {% trans "Overwrite existing description" %}
          </label>
        </div>
      {% endif %}

      <div class="d-flex gap-2">
        <button class="btn btn-primary" type="submit">{% trans "Save description" %}</button>
        <a class="btn btn-outline-secondary" href="{% url 'web:dashboard_ai_tools' %}">{% trans "Cancel" %}</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
