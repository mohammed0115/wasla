<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ØªÙ… Ø¨Ù†Ø¬Ø§Ø­ | ÙˆØµÙ„Ø©</title>
    <link rel="stylesheet" href="css/theme.css" />
    <meta name="color-scheme" content="light dark" />
  </head>
  <body>
    <div class="page">
      <header class="topbar" aria-label="Top bar">
        <a class="brand" href="index.html" aria-label="Wasla">
          <span class="brand-badge" aria-hidden="true">Ùˆ</span>
          <span class="brand-title">
            <span>ÙˆØµÙ„Ø©</span>
            <small>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</small>
          </span>
        </a>
        <div class="toolbar">
          <button class="icon-btn" id="themeToggle" type="button" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">
            <span id="themeIcon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path
                  d="M21 14.5A8.5 8.5 0 1 1 9.5 3a6.7 6.7 0 0 0 11.5 11.5Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </span>
          </button>
        </div>
      </header>

      <main class="container">
        <section class="card" aria-label="Success card">
          <div class="card-header">
            <h1 class="title">ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­</h1>
            <p class="subtitle">Ù…Ø¨Ø±ÙˆÙƒ! Ø­Ø³Ø§Ø¨Ùƒ Ø¬Ø§Ù‡Ø² â€” ØªÙ‚Ø¯Ø± ØªØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù†.</p>
          </div>

          <div class="card-body">
            <div class="alert success show" role="status" aria-live="polite">
              <div style="display:flex;align-items:center;gap:10px;">
                <span aria-hidden="true">
                  <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                      d="M20 6 9 17l-5-5"
                      stroke="currentColor"
                      stroke-width="2.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </span>
                <div>
                  <div style="font-weight:800;">ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ğŸ‰</div>
                  <div class="muted" id="nextStepText">Ø¬Ø§Ø±Ù ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©...</div>
                </div>
              </div>
            </div>

            <div class="field">
              <div class="label">Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø³Ø§Ø¨</div>
              <div class="input" style="display:grid;gap:8px;">
                <div>
                  <span class="muted">Ø§Ù„Ø§Ø³Ù…:</span>
                  <strong id="summaryName">â€”</strong>
                </div>
                <div>
                  <span class="muted">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„:</span>
                  <strong id="summaryPhone" dir="ltr">â€”</strong>
                </div>
                <div>
                  <span class="muted">Ø§Ù„Ù†ÙˆØ¹:</span>
                  <strong id="summaryRole">â€”</strong>
                </div>
              </div>
            </div>

            <div class="actions">
              <a class="btn btn-primary" id="goDashboardBtn" href="/">
                Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
              </a>
              <a class="btn btn-secondary" href="index.html">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¢Ø®Ø±</a>
            </div>

            <p class="muted" style="margin: 12px 0 0;">
              Ù…Ù„Ø§Ø­Ø¸Ø©: Ø²Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…ÙˆØ¬Ù‡ Ù„Ù„ØªÙƒØ§Ù…Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Django). ÙÙŠ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ù„ØªØ¹Ø¯ÙŠÙ„Ù‡.
            </p>
          </div>
        </section>
      </main>
    </div>

    <script>
      // Simple theme + summary renderer (no extra JS files requested).
      (function () {
        const STORAGE_KEY = "wasla_theme";
        const themeToggle = document.getElementById("themeToggle");
        const themeIcon = document.getElementById("themeIcon");

        const applyTheme = (theme) => {
          document.documentElement.setAttribute("data-theme", theme);
          if (!themeIcon) return;
          if (theme === "dark") {
            themeIcon.innerHTML = `
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" stroke="currentColor" stroke-width="2"/>
                <path d="M12 2v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M12 20v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M4.93 4.93l1.41 1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M17.66 17.66l1.41 1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M2 12h2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M20 12h2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M4.93 19.07l1.41-1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            `;
          } else {
            themeIcon.innerHTML = `
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path
                  d="M21 14.5A8.5 8.5 0 1 1 9.5 3a6.7 6.7 0 0 0 11.5 11.5Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            `;
          }
        };

        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved === "dark" || saved === "light") applyTheme(saved);

        if (themeToggle) {
          themeToggle.addEventListener("click", () => {
            const current = document.documentElement.getAttribute("data-theme") || "light";
            const next = current === "dark" ? "light" : "dark";
            localStorage.setItem(STORAGE_KEY, next);
            applyTheme(next);
          });
        }

        const regRaw = localStorage.getItem("wasla_reg");
        let reg = null;
        try {
          reg = regRaw ? JSON.parse(regRaw) : null;
        } catch (_) {}

        const roleMap = { user: "Ù…Ø³ØªØ®Ø¯Ù…", merchant: "ØªØ§Ø¬Ø±", provider: "Ù…Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø©" };
        const nameEl = document.getElementById("summaryName");
        const phoneEl = document.getElementById("summaryPhone");
        const roleEl = document.getElementById("summaryRole");
        const nextEl = document.getElementById("nextStepText");

        if (reg && nameEl && phoneEl && roleEl) {
          nameEl.textContent = reg.fullName || "â€”";
          phoneEl.textContent = reg.phoneE164 || "â€”";
          roleEl.textContent = roleMap[reg.role] || "â€”";

          if (nextEl) {
            if (reg.role === "merchant") nextEl.textContent = "Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©: Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØªØ¬Ø±.";
            else if (reg.role === "provider") nextEl.textContent = "Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©: Ø¥ÙƒÙ…Ø§Ù„ Ù…Ù„Ù Ù…Ù‚Ø¯Ù… Ø§Ù„Ø®Ø¯Ù…Ø©.";
            else nextEl.textContent = "Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©: Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØµÙØ­.";
          }
        } else if (nextEl) {
          nextEl.textContent = "ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.";
        }
      })();
    </script>
  </body>
</html>
